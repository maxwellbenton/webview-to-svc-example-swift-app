<!DOCTYPE html>
<html>
<head>
    <title>Mock Merchant</title>
</head>
<body>
    <h1>Mock Merchant Page</h1>
    <button onclick="testMessage()">Test Message Bridge</button>
    <button onclick="launchSafari()">Launch Safari</button>

    <script>
        // Test basic message
        function testMessage() {
            if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.iosMessageHandler) {
                window.webkit.messageHandlers.iosMessageHandler.postMessage({
                    action: 'log',
                    data: 'Button clicked from webpage!'
                });
            } else {
                console.log('iOS message handler not available');
            }
        }

        // Test Safari VC launch
        function launchSafari() {
            if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.iosMessageHandler) {
                window.webkit.messageHandlers.iosMessageHandler.postMessage({
                    action: 'launchExternalDCF',
                    data: {
                        redirectURL: 'https://www.apple.com'
                    }
                });
            }
        }

        // Optional: Send a ready message from your page too
        window.addEventListener('load', function() {
            if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.iosMessageHandler) {
                window.webkit.messageHandlers.iosMessageHandler.postMessage({
                    action: 'log',
                    data: 'Local page loaded successfully'
                });
            }
        });
    </script>
</body>
</html>